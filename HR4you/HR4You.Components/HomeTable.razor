@using HR4You.Model.Base.Pagination
<PopupTag @ref="popupRefTag"></PopupTag>
<PopupProject @ref="popupRefProject"></PopupProject>
<PopupCustomers @ref="popupRefCustomer"></PopupCustomers>
<PopupHourEntry @ref="popupRefHourEntry"></PopupHourEntry>


<div class="addButtons">
    <button class="btn btn-dark" @onclick="(() => CreateTag())">Add Tag</button>
    <button class="btn btn-dark" @onclick="(() => CreateProject())">Add Project</button>
    <button class="btn btn-dark" @onclick="(() => CreateCustomer())">Add Customer</button>
</div>

<div class="AddHourEntry">
    <button class="btn btn-dark" @onclick="(() => CreateHourEntry())">+</button>
</div>

<div class="OverviewContainer">
    <table class="OverviewTable">
        <thead>
            <tr>
                <th>Date</th>
                <th>Begin</th>
                <th>End</th>
                <th>Duration</th>
                <th>Project</th>
                <th>Activity</th>
                <th>Tag</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var entry in entries.Data)
            {
                <tr>
                    <td>@entry.Date</td>
                    <td>@entry.StartTime</td>
                    <td>@entry.EndTime</td>
                    <td>@entry.Duration</td>
                    <td>@entry.ProjectId</td>
                    <td>@entry.Type</td>
                    <td>@entry.TagId</td>
                    <td>
                        <span style="color:red"><i class="fa-solid fa-trash"></i></span>
                        <i class="fa-regular fa-pen-to-square"></i>
                    </td>
                </tr>
            }

        </tbody>
    </table>
</div>

@code {

    [Parameter]
    public PagedResponseKeySet<HourEntry> entries { get; set; }

    public List<Customer> customerEntries { get; set; }

    private PopupTag popupRefTag;
    private PopupProject popupRefProject;
    private PopupCustomers popupRefCustomer;
    private PopupHourEntry popupRefHourEntry;

    public string RequestURLUser = "http://localhost:5001/api/master-data/customer/get?Id="; //User
    public string RequestURLProject = "http://localhost:5001/api/master-data/project/get?Id=";
    public string RequestURLCustomer = "http://localhost:5001/api/master-data/customer/get?Id="; // ????
    public string RequestURLHourEntry = "http://localhost:5001/api/master-data/hour-entry/get?Id=";

    private void CreateTag()
    {
        popupRefTag.ShowOverview(RequestURLUser, "Add Tag");
        //NavigationManager.NavigateTo($"edit-product/{GivenId}");
    }
    private void CreateProject(){
        popupRefProject.Show(RequestURLProject, "Add Project");
    }
    private void CreateCustomer()
    {
        popupRefCustomer.ShowOverview("Add Customer");
    }

    private async Task CreateHourEntry()
    {
        await popupRefHourEntry.ShowOverview("Add Hour Entry");
        
    }
}

         