@using HR4You.Model.Base.Pagination
<PopupTag @ref="popupRefTag"></PopupTag>
<PopupProject @ref="popupRefProject"></PopupProject>
<PopupCustomers @ref="popupRefCustomer"></PopupCustomers>
<PopupHourEntry @ref="popupRefHourEntry"></PopupHourEntry>


<div class="addButtons flex flex-row gap-2">
    <button class="bg-black p-1 rounded-[5px]" @onclick="(() => CreateTag())">Add Tag</button>
    <button class="bg-black p-1 rounded-[5px]" @onclick="(() => CreateProject())">Add Project</button>
    <button class="bg-black p-1 rounded-[5px]" @onclick="(() => CreateCustomer())">Add Customer</button>
</div>

<input class="submit bg-black rounded-[5px]" type="submit" value="+" />

<div class="AddHourEntry">
    <button class="btn btn-dark" @onclick="(() => CreateHourEntry())">+</button>
</div>

<div class="OverviewContainer">
    <table class="OverviewTable">
        <thead>
            <tr>
                <th>Date</th>
                <th>Begin</th>
                <th>End</th>
                <th>Duration</th>
                <th>Project</th>
                <th>Activity</th>
                <th>Tag</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var entry in entries.Data)
            {
                <tr>
                    <td>@entry.Date</td>
                    <td>@entry.StartTime</td>
                    <td>@entry.EndTime</td>
                    <td>@entry.Duration</td>
                    <td>@entry.ProjectId</td>
                    <td>@entry.Type</td>
                    <td>@entry.TagId</td>
                    <td>
                        <button class="bg-red-500 bg-opacity-50 rounded-[5px] border border-2 border-red-500"><i class="fa-solid fa-trash"></i></button>
                        <button class="bg-gray-500 bg-opacity-50 rounded-[5px] border border-2 border-gray-500"><i class="fa-regular fa-pen-to-square"></i></button>
                    </td>
                </tr>
            }

        </tbody>
    </table>
</div>

<KeysetPagination TItem="HourEntry" entries="entries" ApiEndpoint="http://localhost:5001/api/master-data/hour-entry/get-all-paged" />


@code {

    [Parameter]
    public PagedResponseKeySet<HourEntry> entries { get; set; }

    public List<Customer> customerEntries { get; set; }

    private PopupTag popupRefTag;
    private PopupProject popupRefProject;
    private PopupCustomers popupRefCustomer;
    private PopupHourEntry popupRefHourEntry;

    public string RequestURLUser = "http://localhost:5001/api/master-data/customer/get?Id="; //User
    public string RequestURLProject = "http://localhost:5001/api/master-data/project/get?Id=";
    public string RequestURLCustomer = "http://localhost:5001/api/master-data/customer/get?Id="; // ????
    public string RequestURLHourEntry = "http://localhost:5001/api/master-data/hour-entry/get?Id=";

    private void CreateTag()
    {
        popupRefTag.ShowOverview("Add Tag");
        //NavigationManager.NavigateTo($"edit-product/{GivenId}");
    }
    private void CreateProject(){
        popupRefProject.ShowOverview(RequestURLProject, "Add Project");
    }
    private void CreateCustomer()
    {
        popupRefCustomer.ShowOverview("Add Customer");
    }

    private async Task CreateHourEntry()
    {
        await popupRefHourEntry.ShowOverview("Add Hour Entry");
        
    }
}

